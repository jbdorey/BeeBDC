<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-gb">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Occurrence Data Cleaning • BeeBDC</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Occurrence Data Cleaning">
<meta name="description" content="Flags and checks occurrence data that are in Darwin Core format. The package includes generic functions and data as well as some that are specific to bees. This package is meant to build upon and be complimentary to other excellent occurrence cleaning packages, including bdc and CoordinateCleaner. This package uses datasets from several sources and particularly from the Discover Life Website, created by Ascher and Pickering (2020). For further information, please see the original publication and package website. Publication - Dorey et al. (2023) &lt;doi:10.1101/2023.06.30.547152&gt; and package website - Dorey et al. (2023) &lt;https://github.com/jbdorey/BeeBDC&gt;.">
<meta property="og:description" content="Flags and checks occurrence data that are in Darwin Core format. The package includes generic functions and data as well as some that are specific to bees. This package is meant to build upon and be complimentary to other excellent occurrence cleaning packages, including bdc and CoordinateCleaner. This package uses datasets from several sources and particularly from the Discover Life Website, created by Ascher and Pickering (2020). For further information, please see the original publication and package website. Publication - Dorey et al. (2023) &lt;doi:10.1101/2023.06.30.547152&gt; and package website - Dorey et al. (2023) &lt;https://github.com/jbdorey/BeeBDC&gt;.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">BeeBDC</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">1.3.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="index.html" aria-label="Go to package home"><span class="fa fa-home"></span></a></li>
<li class="nav-item"><a class="nav-link" href="reference/index.html" aria-label="Function list"><span class="fa fas fa-r"></span> Functions</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-occurrence-cleaning" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Occurrence data cleaning vignettes"><span class="fa fas fa-broom"></span> Occurrence cleaning</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-occurrence-cleaning">
<li><a class="dropdown-item" href="articles/BeeBDC_main.html">BeeBDC full cleaning workflow</a></li>
    <li><a class="dropdown-item" href="articles/basic_workflow.html">BeeBDC basic workflow</a></li>
    <li><a class="dropdown-item" href="articles/dataPrep.html">Bee-specific data preparation</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-species-richness-estimation" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Species richness estimation vignettes"><span class="fa fas fa-arrow-up-right-dots"></span> Species richness estimation</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-species-richness-estimation">
<li><a class="dropdown-item" href="articles/speciesRichness_example.html">BeeBDC richness estimation</a></li>
    <li><a class="dropdown-item" href="articles/speciesRichness_example.html#Parallel-estimations">  1.0 Parallel estimation</a></li>
    <li><a class="dropdown-item" href="articles/speciesRichness_example.html#Estimating-richness-from-the-known-unknowns">  2.0 Estimation with checklists</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="https://jbdorey.github.io/BeeBDC/news/index.html"><span class="fa fas fa-newspaper"></span> News</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/jbdorey/BeeBDC/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="section">
<a href="https://github.com/jbdorey/BeeBDC" class="external-link"><img src="https://photos.smugmug.com/photos/i-MpLFKTT/0/741daa6d/X4/i-MpLFKTT-X4.png" alt="BeeBDC logo of a cuckoo bee sweeping up occurrence records in South America" align="right" width="155"></a><a class="anchor" aria-label="anchor" href="#section"></a>
</h1></div>
<div class="section level2">
<h2 id="beebdc-an-occurrence-data-cleaning-package">
<strong>BeeBDC: an occurrence data cleaning package</strong><a class="anchor" aria-label="anchor" href="#beebdc-an-occurrence-data-cleaning-package"></a>
</h2>
<!-- badges: start -->

<!-- badges: end -->
<div class="section level4">
<h4 id="overview">
<strong>Overview</strong><a class="anchor" aria-label="anchor" href="#overview"></a>
</h4>
<p>The consistent implementation of biodiversity data continues to be a challenge for researchers. We present the <strong>BeeBDC</strong> package which provides novel and updated functions for flagging, cleaning, and visualising occurrence datasets. Our functions are mostly general in regards to taxon; however, we also provide some functions and data that are specific for use with bee occurrence data; specifically due to their input data. We build upon functions and conventions in other fantastic R packages, especially <a href="https://brunobrr.github.io/bdc/" class="external-link">bdc</a> and <a href="https://ropensci.github.io/CoordinateCleaner/articles/Cleaning_GBIF_data_with_CoordinateCleaner.html" class="external-link">CoordinateCleaner</a>, while also removing many dependencies on sp-related packages. Hence, our package name is <strong>Bee</strong> <strong>B</strong>iodiversity <strong>D</strong>ata <strong>C</strong>leaning (<strong>BeeBDC</strong>).</p>
<p>We provide a full workflow that uses BeeBDC, bdc, and CoordinateCleaner to clean occurrence data in our Articles page and encourage users to read and also cite this primary <a href="https://doi.org/10.1101/2023.06.30.547152" class="external-link">publication</a>. For our parallelised implementation of iChao and iNEXT species richness estimations, cite this <a href="DOI%20TO%20COME">primary publication</a>.</p>
</div>
<div class="section level4">
<h4 id="structure-of-beebdc">
<strong>Structure of <em>BeeBDC</em></strong><a class="anchor" aria-label="anchor" href="#structure-of-beebdc"></a>
</h4>
<p>The <strong>BeeBDC</strong> toolkit is organized using the conventions similar to <strong>bdc</strong> and <strong>CoordinateCleaner</strong>.</p>
<blockquote>
<p>Like in the <strong>bdc</strong> package, we provide a suggested workflow here. While our functions can mostly be run out of order, there are a few exceptions mentioned throughout the documentation. Additionally, many functions require the database_id column that is generated early on in the <strong>BeeBDC</strong> or <strong>bdc</strong> workflows. When running very large datasets (e.g., the global bee occurrence dataset) you may require a machine that has a minimum amount of RAM (~32 GB). However, we do try to provide work-arounds, especially by alowing some functions to be broken into consumable chunks. Paper DOI - <a href="https://doi.org/10.1101/2023.06.30.547152" class="external-link uri">https://doi.org/10.1101/2023.06.30.547152</a>; Package GitHub - <a href="https://github.com/jbdorey/BeeBDC/" class="external-link uri">https://github.com/jbdorey/BeeBDC/</a></p>
</blockquote>
</div>
<div class="section level4">
<h4 id="workflow-figure-from-dorey-et-al-2023">
<img src="https://photos.smugmug.com/photos/i-V37Vg2w/4/X4/i-V37Vg2w-X4.jpg" alt="Workflow figure from Dorey et al. 2023"><a class="anchor" aria-label="anchor" href="#workflow-figure-from-dorey-et-al-2023"></a>
</h4>
</div>
<div class="section level4">
<h4 id="installation">
<strong>Installation</strong><a class="anchor" aria-label="anchor" href="#installation"></a>
</h4>
<p>You can install <em>BeeBDC</em> from CRAN or GitHub.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>  <span class="co"># Install BeeBDC from CRAN</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"BeeBDC"</span><span class="op">)</span></span>
<span></span>
<span>  <span class="co"># Or using the development version from GitHub (keeping in mind this may not be as stable)</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"https://github.com/jbdorey/BeeBDC.git"</span>, user<span class="op">=</span><span class="st">"jbdorey"</span>, </span>
<span>                          <span class="co"># To use the development version use "devel"; otherwise choose "main"</span></span>
<span>                        ref <span class="op">=</span> <span class="st">"devel"</span>, force <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>Two optional packages can also be downloaded prior to starting your workflow, if desired. But, these are not essential. The packages BiocManager and devtools may also be required to download the two extra packages.</p>
<ol style="list-style-type: decimal">
<li>The first package, <strong>rnaturalearthhires</strong>, is a data package that allows the usage of higher-resolution country maps and is very useful for multiple <strong>BeeBDC</strong> functions.</li>
<li>The second package, <strong>ComplexHeatmap</strong>, is only used for one <strong>BeeBDC</strong> function (<code><a href="reference/chordDiagramR.html">chordDiagramR()</a></code>) and is less critical.</li>
</ol>
<p>When either of these packages are called, the user will be prompted to install them. However, the latter may try to restart your R session.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>  <span class="co"># These two packages may need to be installed in order to install the actual required packages </span></span>
<span>    <span class="co"># below.</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="st"><a href="https://bioconductor.github.io/BiocManager/" class="external-link">"BiocManager"</a></span>, quietly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"BiocManager"</span><span class="op">)</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="st"><a href="https://devtools.r-lib.org/" class="external-link">"devtools"</a></span>, quietly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"devtools"</span><span class="op">)</span></span>
<span></span>
<span>  <span class="co"># Install ComplexHeatmap and rnaturalearthhires</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"ropensci/rnaturalearthhires"</span><span class="op">)</span></span>
<span><span class="fu">BiocManager</span><span class="fu">::</span><span class="fu"><a href="https://bioconductor.github.io/BiocManager/reference/install.html" class="external-link">install</a></span><span class="op">(</span><span class="st">"ComplexHeatmap"</span><span class="op">)</span></span></code></pre></div>
<blockquote>
<h3 id="first-time-using-the-sf-or-terra-packages">First time using the <em>sf</em> or <em>terra</em> packages?</h3>
<p>The first time that you use <strong>terra</strong> or <strong>sf</strong> on a new computer you may need to install some dependencies. Try to install the <strong>terra</strong> and <strong>sf</strong> packages first but then come back here if that doesn’t work.</p>
<h5 id="windows">Windows:</h5>
<p>On <strong>Windows</strong>, you need to first install <a href="https://cran.r-project.org/bin/windows/Rtools/" class="external-link">Rtools</a> to get a C++ compiler that <strong>R</strong> can use. You need a recent version of <strong>Rtools42</strong> (rtools42-5355-5357).</p>
<h5 id="macos">MacOS:</h5>
<p>On <strong>macOS</strong>, you can use <a href="https://www.macports.org/" class="external-link">MacPorts</a> or <a href="https://brew.sh/" class="external-link">Homebrew</a>.</p>
<p>With <strong>MacPorts</strong> you can do</p>
<p><code>sudo port install R-terra</code></p>
<p>With <strong>Homebrew</strong>, you need to first install GDAL:</p>
<p><code>brew install pkg-config</code></p>
<p><code>brew install gdal</code></p>
<p>Followed by (note the additional configuration argument needed for Homebrew)</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>  <span class="co"># Install terra</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"terra"</span>, type <span class="op">=</span> <span class="st">"source"</span>, configure.args <span class="op">=</span> <span class="st">"--with-proj-lib=$(brew --prefix)/lib/"</span><span class="op">)</span></span>
<span>  <span class="co"># install sf</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"sf"</span>, type <span class="op">=</span> <span class="st">"source"</span>, configure.args <span class="op">=</span> <span class="st">"--with-proj-lib=$(brew --prefix)/lib/"</span><span class="op">)</span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rspatial.org/" class="external-link">terra</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span></span></code></pre></div>
</blockquote>
<p>Load the package with:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://jbdorey.github.io/BeeBDC/">BeeBDC</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="id_1-data-merge">1. <a href="https://jbdorey.github.io/BeeBDC/articles/BeeBDC_main.html#data-merge"><strong>Data merge</strong></a>
<a class="anchor" aria-label="anchor" href="#id_1-data-merge"></a>
</h4>
<p>Integrate and merge different datasets from major the data repositories - GBIF, SCAN, iDigBio, the USGS, and ALA.</p>
<ul>
<li>
<code><a href="reference/atlasDownloader.html">atlasDownloader()</a></code> Downloads ALA data and creates a new file in the path to put those data. This function can also request downloads from other atlases (<a href="https://galah.ala.org.au/R/articles/choosing_an_atlas.html" class="external-link">see here</a>). However, it will only send the download to your email and you must do the rest yourself at this point.</li>
<li>
<code><a href="reference/repoMerge.html">repoMerge()</a></code> Locates data from GBIF, ALA, iDigBio, and SCAN within a directory and reads it in along with its eml metadata.</li>
<li>
<code><a href="reference/repoFinder.html">repoFinder()</a></code> Find GBIF, ALA, iDigBio, and SCAN files in a directory.</li>
<li>
<code><a href="reference/importOccurrences.html">importOccurrences()</a></code> Looks for and imports the most-recent version of the occurrence data created by the <code><a href="reference/repoMerge.html">BeeBDC::repoMerge()</a></code> function.</li>
<li>
<code><a href="reference/USGS_formatter.html">USGS_formatter()</a></code> The function finds, imports, formats, and creates metadata for the USGS dataset.</li>
<li>
<code><a href="reference/formattedCombiner.html">formattedCombiner()</a></code> Merges the Darwin Core version of the USGS dataset that was created using <code><a href="reference/USGS_formatter.html">BeeBDC::USGS_formatter()</a></code> with the main dataset.</li>
<li>
<code><a href="reference/dataSaver.html">dataSaver()</a></code> Used at the end of 1.x in the example workflow in order to save the occurrence dataset and its associated eml metadata.</li>
</ul>
</div>
<div class="section level4">
<h4 id="id_2-data-preperation">2. <a href="https://jbdorey.github.io/BeeBDC/articles/BeeBDC_main.html#data-preparation"><strong>Data preperation</strong></a>
<a class="anchor" aria-label="anchor" href="#id_2-data-preperation"></a>
</h4>
<p>The reading in and formatting of the major and minor [bee] occurrence repositories as well as some data modifications. This section is mostly, but not entirely, related to bee occurrence data.</p>
<ul>
<li>
<code><a href="reference/fileFinder.html">fileFinder()</a></code> A function which can be used to find files within a user-defined directory based on a user-provided character string.</li>
<li>
<code><a href="reference/PaigeIntegrater.html">PaigeIntegrater()</a></code> Replaces publicly available data with data that has been manually cleaned and error-corrected for use in the paper Chesshire, P. R., Fischer, E. E., Dowdy, N. J., Griswold, T., Hughes, A. C., Orr, M. J., . . . McCabe, L. M. (In Press). Completeness analysis for over 3000 United States bee species identifies persistent data gaps. Ecography.</li>
<li>
<code><a href="reference/readr_BeeBDC.html">readr_BeeBDC()</a></code> Read in a variety of data files that are specific to certain smaller data providers. There is an internal readr function for each dataset and each one of these functions is called by readr_BeeBDC. While these functions are internal, they are displayed in the documentation of readr_BeeBDC for clarity.</li>
<li>
<code><a href="reference/idMatchR.html">idMatchR()</a></code> This function attempts to match database_ids from a prior bdc or BeeBDC run in order to keep this column somewhat consistent between iterations. However, not all records contain sufficient information for this to work flawlessly.</li>
</ul>
</div>
<div class="section level4">
<h4 id="id_3-initial-flags">3. <a href="https://jbdorey.github.io/BeeBDC/articles/BeeBDC_main.html#initial-flags"><strong>Initial flags</strong></a>
<a class="anchor" aria-label="anchor" href="#id_3-initial-flags"></a>
</h4>
<p>Flagging and carpentry of several, mostly general, data issues. See bdc’s <a href="https://brunobrr.github.io/bdc/articles/prefilter.html" class="external-link">pre-filter</a> for more related functions.</p>
<ul>
<li>
<code><a href="reference/countryNameCleanR.html">countryNameCleanR()</a></code> This is a basic function for a user to manually fix some country name inconsistencies.</li>
<li>
<code><a href="reference/jbd_CfC_chunker.html">jbd_CfC_chunker()</a></code> Because the <code>BeeBDC::jbd_country_from_coordinates()</code> function is very RAM-intensive, this wrapper allows a user to specify chunk-sizes and only analyse a small portion of the occurrence data at a time. The prefix jbd_ is used to highlight the difference between this function and the original <code><a href="https://brunobrr.github.io/bdc/reference/bdc_country_from_coordinates.html" class="external-link">bdc::bdc_country_from_coordinates()</a></code>.</li>
<li>
<code><a href="reference/jbd_Ctrans_chunker.html">jbd_Ctrans_chunker()</a></code> Because the <code><a href="reference/jbd_coordinates_transposed.html">BeeBDC::jbd_coordinates_transposed()</a></code> function is very RAM-intensive, this wrapper allows a user to specify chunk-sizes and only analyse a small portion of the occurrence data at a time. The prefix jbd_ is used to highlight the difference between this function and the original bdc::bdc_coordinates_transposed(). These functions will preferably use the countryCode column generated by <code><a href="https://brunobrr.github.io/bdc/reference/bdc_country_standardized.html" class="external-link">bdc::bdc_country_standardized()</a></code>.</li>
<li>
<code><a href="reference/jbd_coordCountryInconsistent.html">jbd_coordCountryInconsistent()</a></code> Compares stated country name in an occurrence record with record’s coordinates using rnaturalearth data. The prefix, jbd_ is meant to distinguish this function from the original <code><a href="https://brunobrr.github.io/bdc/reference/bdc_coordinates_country_inconsistent.html" class="external-link">bdc::bdc_coordinates_country_inconsistent()</a></code>. This functions will preferably use the countryCode and country_suggested columns generated by <code><a href="https://brunobrr.github.io/bdc/reference/bdc_country_standardized.html" class="external-link">bdc::bdc_country_standardized()</a></code>; please run it on your dataset prior to running this function.</li>
<li>
<code><a href="reference/flagAbsent.html">flagAbsent()</a></code> Flags occurrences that are “ABSENT” for the occurrenceStatus (or some other user-specified) column.</li>
<li>
<code><a href="reference/GBIFissues.html">GBIFissues()</a></code> This function will flag records which are subject to a user-specified vector of GBIF issues.</li>
<li>
<code><a href="reference/flagRecorder.html">flagRecorder()</a></code> This function is used to save the flag data for your occurrence data as you run the BeeBDC script. It will read and append existing files, if asked to. Your flags should also be saved in the occurrence file itself automatically.</li>
</ul>
</div>
<div class="section level4">
<h4 id="id_4-taxonomy">4. <a href="https://jbdorey.github.io/BeeBDC/articles/BeeBDC_main.html#taxonomy"><strong>Taxonomy</strong></a>
<a class="anchor" aria-label="anchor" href="#id_4-taxonomy"></a>
</h4>
<p>Harmonisation of scientific names against a taxonomy downloaded from <strong>taxadb</strong>, from the provided <a href="https://www.discoverlife.org" class="external-link">Discover Life</a> website’s taxonomic reference, or a custom taxonomy.</p>
<ul>
<li>
<code><a href="reference/taxadbToBeeBDC.html">taxadbToBeeBDC()</a></code> Uses the <strong>taxadb</strong> to download a species taxonomy from any of their sources and transforms it into the BeeBDC format that can then be exported as a .csv or into the R enviornment to be be fed directly into <code><a href="reference/HarmoniseR.html">BeeBDC::harmoniseR()</a></code>. This means that the taxonomy from ANY taxon can be used. See also <code><a href="reference/beesTaxonomy.html">BeeBDC::beesTaxonomy()</a></code> for the best global bee taxonomy.</li>
<li>
<code><a href="reference/HarmoniseR.html">harmoniseR()</a></code> Uses the Discover Life taxonomy to harmonise bee occurrences and flag those that do not match the checklist. This function could be hijacked to service other taxa if a user matched the format of the beesTaxonomy file. <code><a href="reference/HarmoniseR.html">BeeBDC::harmoniseR()</a></code> prefers to use the names_clean columns that is generated by <code><a href="https://brunobrr.github.io/bdc/reference/bdc_clean_names.html" class="external-link">bdc::bdc_clean_names()</a></code>. While this is not required, you may find better results by running that function on your dataset first.</li>
</ul>
</div>
<div class="section level4">
<h4 id="id_5-space">5. <a href="https://jbdorey.github.io/BeeBDC/articles/BeeBDC_main.html#space"><strong>Space</strong></a>
<a class="anchor" aria-label="anchor" href="#id_5-space"></a>
</h4>
<p>Flagging of erroneous, suspicious, and low-precision geographic coordinates.</p>
<ul>
<li>
<code><a href="reference/jbd_coordinates_precision.html">jbd_coordinates_precision()</a></code> This function flags occurrences where BOTH latitude and longitude values are rounded. This contrasts with the original function, <code><a href="https://brunobrr.github.io/bdc/reference/bdc_coordinates_precision.html" class="external-link">bdc::bdc_coordinates_precision()</a></code> that will flag occurrences where only one of latitude OR longitude are rounded. The BeeBDC approach saves occurrences that may have had terminal zeros rounded in one coordinate column.</li>
<li>
<code><a href="reference/diagonAlley.html">diagonAlley()</a></code> A simple function that looks for potential latitude and longitude fill-down errors by identifying consecutive occurrences with coordinates at regular intervals. This is accomplished by using a sliding window with the length determined by minRepeats.</li>
<li>
<code><a href="reference/coordUncerFlagR.html">coordUncerFlagR()</a></code> To use this function, the user must choose a column, probably “coordinateUncertaintyInMeters” and a threshold above which occurrences will be flagged for geographic uncertainty.</li>
<li>
<code><a href="reference/countryOutlieRs.html">countryOutlieRs()</a></code> This function flags country-level outliers using the checklist provided with this package. For additional context and column names, see <code>beesChecklist</code>.</li>
<li>
<code>continentOutlieRs()</code> This function flags continent-level outliers using the checklist provided with this package. This function works much the same as <code><a href="reference/countryOutlieRs.html">countryOutlieRs()</a></code>, but at a lower resolution. For additional context and column names, see <code>beesChecklist</code>.</li>
<li>
<code><a href="reference/jbd_create_figures.html">jbd_create_figures()</a></code> Creates figures (i.e., bar plots, maps, and histograms) reporting the results of data quality tests implemented the bdc and BeeBDC packages. Works like <code><a href="https://brunobrr.github.io/bdc/reference/bdc_create_figures.html" class="external-link">bdc::bdc_create_figures()</a></code>, but it allows the user to specify a save path.</li>
</ul>
</div>
<div class="section level4">
<h4 id="id_6-time">6. <a href="https://jbdorey.github.io/BeeBDC/articles/BeeBDC_main.html#time"><strong>Time</strong></a>
<a class="anchor" aria-label="anchor" href="#id_6-time"></a>
</h4>
<p>Flagging and, whenever possible, correction of inconsistent collection date.</p>
<ul>
<li>
<code><a href="reference/dateFindR.html">dateFindR()</a></code> A function made to search other columns for dates and add them to the eventDate column. The function searches the columns locality, fieldNotes, locationRemarks, and verbatimEventDate for the relevant information.</li>
</ul>
</div>
<div class="section level4">
<h4 id="id_7-de-duplication">7. <a href="https://jbdorey.github.io/BeeBDC/articles/BeeBDC_main.html#de-duplication"><strong>De-duplication</strong></a>
<a class="anchor" aria-label="anchor" href="#id_7-de-duplication"></a>
</h4>
<ul>
<li>
<code><a href="reference/dupeSummary.html">dupeSummary()</a></code> This function uses user-specified inputs and columns to identify duplicate occurrence records. Duplicates are identified iteratively and will be tallied up, duplicate pairs clustered, and sorted at the end of the function. The function is designed to work with Darwin Core data with a database_id column, but it is also modifiable to work with other columns.</li>
</ul>
</div>
<div class="section level4">
<h4 id="id_8-filtering">8. <a href="https://jbdorey.github.io/BeeBDC/articles/BeeBDC_main.html#data-filtering"><strong>Filtering</strong></a>
<a class="anchor" aria-label="anchor" href="#id_8-filtering"></a>
</h4>
<ul>
<li>
<code><a href="reference/manualOutlierFindeR.html">manualOutlierFindeR()</a></code> Uses expert-identified outliers with source spreadsheets that may be edited by users. The function will also use the duplicates file made using <code><a href="reference/dupeSummary.html">BeeBDC::dupeSummary()</a></code> to identify duplicates of the expert-identified outliers and flag those as well. The function will add a flagging column called .expertOutlier where records that are FALSE are the expert outliers.</li>
<li>
<code><a href="reference/summaryFun.html">summaryFun()</a></code> Using all flag columns (column names starting with “.”), this function either creates or updates the .summary flag column which is FALSE when ANY of the flag columns are FALSE. Columns can be excluded and removed after creating the .summary column. Additionally, the occurrence dataset can be filtered to only those where .summary = TRUE at the end of the function.</li>
</ul>
</div>
<div class="section level4">
<h4 id="id_9-figures-and-tables">9. <a href="https://jbdorey.github.io/BeeBDC/articles/BeeBDC_main.html#figures-and-tables"><strong>Figures and tables</strong></a>
<a class="anchor" aria-label="anchor" href="#id_9-figures-and-tables"></a>
</h4>
<ul>
<li>
<code><a href="reference/chordDiagramR.html">chordDiagramR()</a></code> This function outputs a figure which shows the relative size and direction of occurrence points duplicated between data providers, such as, SCAN, GBIF, ALA, etc. This function requires the outputs generated by <code><a href="reference/dupeSummary.html">BeeBDC::dupeSummary()</a></code>.</li>
<li>
<code><a href="reference/dupePlotR.html">dupePlotR()</a></code> Creates a plot with two bar graphs. One shows the absolute number of duplicate records for each data source while the other shows the proportion of records that are duplicated within each data source. This function requires a dataset that has been run through <code><a href="reference/dupeSummary.html">BeeBDC::dupeSummary()</a></code>.</li>
<li>
<code><a href="reference/plotFlagSummary.html">plotFlagSummary()</a></code> Creates a compound bar plot that shows the proportion of records that pass or fail each flag (rows) and for each data source (columns). The function can also optionally return a point map for a user-specified species when plotMap = TRUE. This function requires that your dataset has been run through some filtering functions - so that is can display logical columns starting with “.”.</li>
<li>
<code><a href="reference/summaryMaps.html">summaryMaps()</a></code> Builds an output figure that shows the number of species and the number of occurrences per country. Breaks the data into classes for visualisation. Users may filter data to their taxa of interest to produce figures of interest.</li>
<li>
<code><a href="reference/interactiveMapR.html">interactiveMapR()</a></code> Uses the occurrence data (preferably uncleaned) and outputs interactive .html maps that can be opened in your browser to a specific directory. The maps can highlight if an occurrence has passed all filtering (.summary == TRUE) or failed at least one filter (.summary == FALSE). This can be modified by first running <code><a href="reference/summaryFun.html">BeeBDC::summaryFun()</a></code> to set the columns that you want to be highlighted. It can also highlight occurrences flagged as expert-identified or country outliers.</li>
<li>
<code><a href="reference/dataProvTables.html">dataProvTables()</a></code> This function will attempt to find and build a table of data providers that have contributed to the input data, especially using the ‘institutionCode’ column. It will also look for a variety of other columns to find data providers using a an internally set sequence of if-else statements. Hence, this function is quite specific for bee data, but should work for other taxa in similar institutions.</li>
<li>
<code><a href="reference/flagSummaryTable.html">flagSummaryTable()</a></code> Takes a flagged dataset and returns the total number of fails (FALSE) per flag (columns starting with “.”) and per species. Users may define the column to group the summary by. While it is intended to work with the scientificName column, users may select any grouping column (e.g., country).</li>
</ul>
</div>
<div class="section level4">
<h4 id="id_10-species-richness-estimation">10. <a href="https://jbdorey.github.io/BeeBDC/articles/speciesRichness_example.html">Species richness estimation</a>
<a class="anchor" aria-label="anchor" href="#id_10-species-richness-estimation"></a>
</h4>
<ul>
<li>
<code>diversityPrepR()</code> Takes your occurrence dataset along with a taxonomy and checklist in order to produce a file that’s ready to be passed into the <code><a href="reference/richnessEstimateR.html">BeeBDC::richnessEstimateR()</a></code> function in order to estimate species richness using iChao (non-parametric species richness; <code><a href="reference/ChaoWrapper.html">BeeBDC::ChaoWrapper()</a></code>) and iNEXT (hill numbers; <code><a href="reference/iNEXTwrapper.html">BeeBDC::iNEXTwrapper()</a></code>) for countries, continents, or the entire globe.</li>
<li>
<code><a href="reference/richnessEstimateR.html">richnessEstimateR()</a></code> Takes an output dataset from <code>BeeBDC::diversityPrepR()</code> to estimate species richness using iChao (non-parametric species richness; <code><a href="reference/ChaoWrapper.html">BeeBDC::ChaoWrapper()</a></code>) and iNEXT (hill numbers; <code><a href="reference/iNEXTwrapper.html">BeeBDC::iNEXTwrapper()</a></code>) for countries, continents, and/or the entire globe. Has parallel functionality.</li>
<li>
<code><a href="reference/iNEXTwrapper.html">iNEXTwrapper()</a></code> A wrapper for <code><a href="https://rdrr.io/pkg/iNEXT/man/iNEXT.html" class="external-link">iNEXT::iNEXT()</a></code> to interpolate and extrapolate Hill numbers with order q (rarify species richness). The wrapper has the ability to estimate species richness for multiple sites (or countries) at once and to do this using multiple cores.</li>
<li>
<code><a href="reference/ChaoWrapper.html">ChaoWrapper()</a></code> A wrapper for <code><a href="https://rdrr.io/pkg/SpadeR/man/ChaoSpecies.html" class="external-link">SpadeR::ChaoSpecies()</a></code> to non-parametrically estimate species richness. The wrapper has the ability to estimate species richness for multiple sites (or countries) at once and to do this using multiple cores at once.</li>
</ul>
</div>
<div class="section level4">
<h4 id="id_11-datasets">11. <strong>Datasets</strong>
<a class="anchor" aria-label="anchor" href="#id_11-datasets"></a>
</h4>
<p>We provide two full datasets that are downloadable using the below two functions</p>
<ul>
<li>
<code><a href="reference/beesTaxonomy.html">beesTaxonomy()</a></code> Downloads the taxonomic information for the bees of the world. Source of taxonomy is listed under “source” but are mostly derived from the Discover Life website. The data will be sourced from the BeeBDC article’s Figshare. Please see also <code><a href="reference/taxadbToBeeBDC.html">BeeBDC::taxadbToBeeBDC()</a></code> for the download of any other taxonomy (for any taxa or for bees).</li>
<li>
<code><a href="reference/beesChecklist.html">beesChecklist()</a></code> Download the table contains taxonomic and country information for the bees of the world based on data collated on Discover Life. The data will be sourced from the BeeBDC article’s Figshare.</li>
</ul>
<p>We further provide five test datasets that are available with BeeBDC</p>
<ul>
<li>
<code><a href="reference/bees3sp.html">BeeBDC::bees3sp</a></code> This test dataset includes 105 random occurrence records from three bee species. The included species are: “<em>Agapostemon tyleri</em> Cockerell, 1917”, “<em>Centris rhodopus</em> Cockerell, 1897”, and “<em>Perdita octomaculata</em> (Say, 1824)”.</li>
<li>
<code><a href="reference/beesRaw.html">BeeBDC::beesRaw</a></code> A small bee occurrence dataset with flags generated by BeeBDC used to run example script and test functions. For data types, see <code><a href="reference/ColTypeR.html">ColTypeR()</a></code>.</li>
<li>
<code><a href="reference/beesFlagged.html">BeeBDC::beesFlagged</a></code> A small bee occurrence dataset with flags generated by BeeBDC used to run example script and test functions. For data types, see <code><a href="reference/ColTypeR.html">ColTypeR()</a></code>.</li>
<li>
<code><a href="reference/beesCountrySubset.html">BeeBDC::beesCountrySubset</a></code> A very small bee occurrence dataset with the columns “scientificName” and “country_suggested” and data for four countries, Fiji, Uganda, Vietnam, and Zambia. This is the test dataset for the species richness functions.</li>
<li>There are also two small test datasets of the beesTaxonomy and beesChecklist in the system files of the package that are filtered to include <em>only</em> those species that occur in bees3sp, beesRaw, and beesFlagged. These are accessible as follows but are only used internally for tests.</li>
</ul>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>  <span class="co"># Access the test taxonomy file</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"testTaxonomy.rda"</span>, package<span class="op">=</span><span class="st">"BeeBDC"</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/load.html" class="external-link">load</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="co"># View the file</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/View.html" class="external-link">View</a></span><span class="op">(</span><span class="va">testTaxonomy</span><span class="op">)</span></span>
<span>  <span class="co"># Access the test checklist file</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"testChecklist.rda"</span>, package<span class="op">=</span><span class="st">"BeeBDC"</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/load.html" class="external-link">load</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="co"># View the file</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/View.html" class="external-link">View</a></span><span class="op">(</span><span class="va">testChecklist</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="package-website">
<strong>Package website</strong><a class="anchor" aria-label="anchor" href="#package-website"></a>
</h4>
<p>See <em>BeeBDC</em> package website (<a href="https://jbdorey.github.io/BeeBDC/reference/index.html" class="uri">https://jbdorey.github.io/BeeBDC/reference/index.html</a>) for detailed explanation on each module.</p>
</div>
<div class="section level4">
<h4 id="getting-help">
<strong>Getting help</strong><a class="anchor" aria-label="anchor" href="#getting-help"></a>
</h4>
<blockquote>
<p>If you encounter a clear bug, please file an issue <a href="https://github.com/jbdorey/BeeBDC/issues" class="external-link"><strong>here</strong></a>. For questions or suggestion, flick us an email (<a href="mailto:jdorey@uow.edu.au" class="email">jdorey@uow.edu.au</a>).</p>
</blockquote>
</div>
<div class="section level4">
<h4 id="citation">
<strong>Citation</strong><a class="anchor" aria-label="anchor" href="#citation"></a>
</h4>
<ul>
<li>
<strong>Paper, dataset, and package citation:</strong> Dorey, J.B., Fischer, E.E., Chesshire, P.R., Nava-Bolaños, A., O’Reilly, R.L., Bossert, S., Collins, S.M., Lichtenberg, E.M., Tucker, E., Smith-Pardo, A., Falcon-Brindis, A., Guevara, D.A., Ribeiro, B.R., de Pedro, D., Hung, J.K.-L., Parys, K.A., McCabe, L.M., Rogan, M.S., Minckley, R.L., Velzco, S.J.E., Griswold, T., Zarrillo, T.A., Jetz, W., Sica, Y.V., Orr, M.C., Guzman, L.M., Ascher, J., Hughes, A.C. &amp; Cobb, N.S. (2023) A globally synthesised and flagged bee occurrence dataset and cleaning workflow. Scientific Data, 10, 1–17. <a href="https://www.doi.org/10.1038/S41597-023-02626-W" class="external-link uri">https://www.doi.org/10.1038/S41597-023-02626-W</a>
<ul>
<li>
<strong>Figshare live data link:</strong> <a href="https://doi.org/10.25451/flinders.21709757" class="external-link uri">https://doi.org/10.25451/flinders.21709757</a>
</li>
</ul>
</li>
<li>
<strong>Species richness citation:</strong> Dorey J. B., Gilpin, A.-M., Johnson, N., Esquerre, D., Hughes, A. C., Ascher, J. S., &amp; Orr, M. C. (Under review). How many bee species are there? A quantitative global estimate. Nature Communications. <a href="https://doi.org/10.21203/rs.3.rs-6372769/v1" class="external-link uri">https://doi.org/10.21203/rs.3.rs-6372769/v1</a>
</li>
<li>
<strong>Package citation:</strong> Dorey, J. B., O’Reilly, R. L., Bossert, S. &amp; Fischer, E. (2023). BeeBDC: an occurrence data cleaning package. R package version 1.3.0. url: <a href="https://github.com/jbdorey/BeeBDC" class="external-link uri">https://github.com/jbdorey/BeeBDC</a>
</li>
<li>
<strong>Discover Life citation (for use of bee taxonomy and checklist):</strong> Ascher, J.S. &amp; Pickering, J. (2020) Discover Life bee species guide and world checklist (Hymenoptera: Apoidea: Anthophila). <a href="https://www.discoverlife.org/mp/20q?guide=Apoidea_species" class="external-link uri">https://www.discoverlife.org/mp/20q?guide=Apoidea_species</a>
</li>
</ul>
<p>This package and its data sets were created with the support, and as a part, of the iDigBees project</p>
<p><a href="https://idigbees.org" class="external-link"><img src="https://photos.smugmug.com/photos/i-rcd8CCs/0/b291edd1/O/i-rcd8CCs.png" alt="The iDigBees logo with a colourful bee and the iDigBees text on the right" align="left" width="300"></a></p>
</div>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=BeeBDC" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/jbdorey/BeeBDC/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/jbdorey/BeeBDC/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li>GPL (&gt;= 3)</li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing BeeBDC</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>James B. Dorey <br><small class="roles"> Author, maintainer, copyright holder </small> <a href="https://orcid.org/0000-0003-2721-3842" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a>  </li>
<li>Robert L. O'Reilly <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0001-5291-7396" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a>  </li>
<li>Silas Bossert <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0002-3620-5468" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a>  </li>
<li>Erica E. Fischer <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0002-8202-158X" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a>  </li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by James B. Dorey, Robert L. O’Reilly, Silas Bossert, Erica E. Fischer.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
