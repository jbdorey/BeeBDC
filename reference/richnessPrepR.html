<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-gb"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Prepare occurrence, taxonomy, and checklist data for richness estimation — richnessPrepR • BeeBDC</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Prepare occurrence, taxonomy, and checklist data for richness estimation — richnessPrepR"><meta name="description" content="Takes your occurrence dataset along with a taxonomy and checklist in order to produce
a file that's ready to be passed into the richnessEstimateR() function in order to
estimate species richness using
iChao and iNEXT (hill numbers) for countries, continents, or the entire globe."><meta property="og:description" content="Takes your occurrence dataset along with a taxonomy and checklist in order to produce
a file that's ready to be passed into the richnessEstimateR() function in order to
estimate species richness using
iChao and iNEXT (hill numbers) for countries, continents, or the entire globe."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">BeeBDC</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">1.3.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../index.html" aria-label="Go to package home"><span class="fa fa-home"></span></a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html" aria-label="Function list"><span class="fa fas fa-r"></span> Functions</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-occurrence-cleaning" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Occurrence data cleaning vignettes"><span class="fa fas fa-broom"></span> Occurrence cleaning</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-occurrence-cleaning"><li><a class="dropdown-item" href="../articles/BeeBDC_main.html">BeeBDC full cleaning workflow (0.0–9.0)</a></li>
    <li><a class="dropdown-item" href="../articles/basic_workflow.html">BeeBDC basic workflow</a></li>
    <li><a class="dropdown-item" href="../articles/BeeBDC_data_preparation.html">Bee-specific data preparation</a></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-species-richness-estimation" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Species richness estimation vignettes"><span class="fa fas fa-arrow-up-right-dots"></span> Species richness estimation</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-species-richness-estimation"><li><a class="dropdown-item" href="../articles/Species_richness_estimation.html">BeeBDC richness estimation</a></li>
    <li><a class="dropdown-item" href="../articles/Species_richness_estimation.html#Parallel-estimations">  1.0 Parallel estimation</a></li>
    <li><a class="dropdown-item" href="../articles/Species_richness_estimation.html#Estimating-richness-from-the-known-unknowns">  2.0 Estimation with checklists</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="https://jbdorey.github.io/BeeBDC/news/index.html"><span class="fa fas fa-newspaper"></span> News</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/jbdorey/BeeBDC/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Prepare occurrence, taxonomy, and checklist data for richness estimation</h1>
      <small class="dont-index">Source: <a href="https://github.com/jbdorey/BeeBDC/blob/main/R/richnessPrepR.R" class="external-link"><code>R/richnessPrepR.R</code></a></small>
      <div class="d-none name"><code>richnessPrepR.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Takes your occurrence dataset along with a taxonomy and checklist in order to produce
a file that's ready to be passed into the <code><a href="richnessEstimateR.html">richnessEstimateR()</a></code> function in order to
estimate species richness using
iChao and iNEXT (hill numbers) for countries, continents, or the entire globe.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">richnessPrepR</span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  taxonomyFile <span class="op">=</span> <span class="fu">BeeBDC</span><span class="fu">::</span><span class="fu"><a href="beesTaxonomy.html">beesTaxonomy</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  checklistFile <span class="op">=</span> <span class="fu">BeeBDC</span><span class="fu">::</span><span class="fu"><a href="beesChecklist.html">beesChecklist</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  curveFunction <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">(</span><span class="fl">228.7531</span> <span class="op">*</span> <span class="va">x</span> <span class="op">*</span> <span class="va">x</span><span class="op">^</span><span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="fl">12.1593</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  sampleSize <span class="op">=</span> <span class="fl">10000</span>,</span>
<span>  countryColumn <span class="op">=</span> <span class="st">"country_suggested"</span>,</span>
<span>  limitGlobal <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  outPath <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>A data frame or tibble. Occurrence records as input. Needs to include the
<code>scientificName</code> column and a "country" column (see <code>countryColumn</code>)</p></dd>


<dt id="arg-taxonomyfile">taxonomyFile<a class="anchor" aria-label="anchor" href="#arg-taxonomyfile"></a></dt>
<dd><p>A data frame or tibble. The taxonomy file to use.
Default = <code><a href="beesTaxonomy.html">beesTaxonomy()</a></code> but see <code><a href="taxadbToBeeBDC.html">taxadbToBeeBDC()</a></code> for other taxa.</p></dd>


<dt id="arg-checklistfile">checklistFile<a class="anchor" aria-label="anchor" href="#arg-checklistfile"></a></dt>
<dd><p>A data frame or tibble. The taxonomy to use.
Default = <code><a href="beesChecklist.html">beesChecklist()</a></code>; use this as a template to convert other taxa checklists.</p></dd>


<dt id="arg-curvefunction">curveFunction<a class="anchor" aria-label="anchor" href="#arg-curvefunction"></a></dt>
<dd><p>A function. The mathematical function that describes the curve used to
randomly sample from in order to fill empty sample sizes for species present in the checklist
but not present in the occurrence dataset. Default is <code>function(x) (228.7531 * x * x^-log(12.1593))</code>,
which is taken from the paper "How many bee species are there? A quantitative global estimate" by
Dorey et al. Models can be fit using <code>mosaic::fitModel()</code>.</p></dd>


<dt id="arg-samplesize">sampleSize<a class="anchor" aria-label="anchor" href="#arg-samplesize"></a></dt>
<dd><p>Numeric. The size of the sample randomly drawn from the provided curve.
See <code>curveFunction</code>. Default = 10000.</p></dd>


<dt id="arg-countrycolumn">countryColumn<a class="anchor" aria-label="anchor" href="#arg-countrycolumn"></a></dt>
<dd><p>Character. The column from which country names should be sought.</p></dd>


<dt id="arg-limitglobal">limitGlobal<a class="anchor" aria-label="anchor" href="#arg-limitglobal"></a></dt>
<dd><p>Character vector. A character vector of the countries to filter the data to
in order limit the extent of the global-level analysis. Defualt = NULL.</p></dd>


<dt id="arg-outpath">outPath<a class="anchor" aria-label="anchor" href="#arg-outpath"></a></dt>
<dd><p>Character. The output path where the curve plot (curvePlot.pdf) and the output
Rdata (richnessInputs.Rda) file will be saved. Default = <code><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir()</a></code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Saves an Rdata file with the data needed to feed into the <code><a href="richnessEstimateR.html">richnessEstimateR()</a></code>
function. The <code><a href="richnessEstimateR.html">richnessEstimateR()</a></code> function will then
use iChao and/or iNEXT to estimate species richness for countries, continents, and the globe.
Also returns the RData file to the environment.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="countryHarmoniseR.html">countryHarmoniseR()</a></code> to harmonise country names based on a short list.</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">beesCountrySubset</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">estimateDataExample</span> <span class="op">&lt;-</span> <span class="fu">richnessPrepR</span><span class="op">(</span></span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">beesCountrySubset</span>,</span></span>
<span class="r-in"><span>  <span class="co"># Download the taxonomy</span></span></span>
<span class="r-in"><span>  taxonomyFile <span class="op">=</span> <span class="fu">BeeBDC</span><span class="fu">::</span><span class="fu"><a href="beesTaxonomy.html">beesTaxonomy</a></span><span class="op">(</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  <span class="co"># Download the checklist</span></span></span>
<span class="r-in"><span>  checklistFile <span class="op">=</span> <span class="fu">BeeBDC</span><span class="fu">::</span><span class="fu"><a href="beesChecklist.html">beesChecklist</a></span><span class="op">(</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  curveFunction <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">(</span><span class="fl">228.7531</span> <span class="op">*</span> <span class="va">x</span> <span class="op">*</span> <span class="va">x</span><span class="op">^</span><span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="fl">12.1593</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  sampleSize <span class="op">=</span> <span class="fl">10000</span>,</span></span>
<span class="r-in"><span>  countryColumn <span class="op">=</span> <span class="st">"country_suggested"</span>,</span></span>
<span class="r-in"><span>  limitGlobal <span class="op">=</span> <span class="cn">NULL</span>,</span></span>
<span class="r-in"><span>  outPath <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by James B. Dorey, Robert L. O’Reilly, Silas Bossert, Erica E. Fischer.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

