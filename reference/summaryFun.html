<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-gb"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Create or update the .summary flag column — summaryFun • BeeBDC</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Create or update the .summary flag column — summaryFun"><meta name="description" content='Using all flag columns (column names starting with "."), this function either creates or updates
the .summary flag column which is FALSE when ANY of the flag columns are FALSE. Columns can be excluded
and removed after creating the .summary column. Additionally, the occurrence dataset
can be filtered to only those where .summary = TRUE at the end of the function.'><meta property="og:description" content='Using all flag columns (column names starting with "."), this function either creates or updates
the .summary flag column which is FALSE when ANY of the flag columns are FALSE. Columns can be excluded
and removed after creating the .summary column. Additionally, the occurrence dataset
can be filtered to only those where .summary = TRUE at the end of the function.'></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">BeeBDC</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">1.3.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../index.html" aria-label="Go to package home"><span class="fa fa-home"></span></a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html" aria-label="Function list"><span class="fa fas fa-r"></span> Functions</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-occurrence-cleaning" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Occurrence data cleaning vignettes"><span class="fa fas fa-broom"></span> Occurrence cleaning</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-occurrence-cleaning"><li><a class="dropdown-item" href="../articles/BeeBDC_main.html">BeeBDC full cleaning workflow (0.0–9.0)</a></li>
    <li><a class="dropdown-item" href="../articles/basic_workflow.html">BeeBDC basic workflow</a></li>
    <li><a class="dropdown-item" href="../articles/dataPrep.html">Bee-specific data preparation</a></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-species-richness-estimation" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Species richness estimation vignettes"><span class="fa fas fa-arrow-up-right-dots"></span> Species richness estimation</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-species-richness-estimation"><li><a class="dropdown-item" href="../articles/speciesRichness_example.html">BeeBDC richness estimation</a></li>
    <li><a class="dropdown-item" href="../articles/speciesRichness_example.html#Parallel-estimations">  1.0 Parallel estimation</a></li>
    <li><a class="dropdown-item" href="../articles/speciesRichness_example.html#Estimating-richness-from-the-known-unknowns">  2.0 Estimation with checklists</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="https://jbdorey.github.io/BeeBDC/news/index.html"><span class="fa fas fa-newspaper"></span> News</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/jbdorey/BeeBDC/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Create or update the .summary flag column</h1>
      <small class="dont-index">Source: <a href="https://github.com/jbdorey/BeeBDC/blob/main/R/summaryFun.R" class="external-link"><code>R/summaryFun.R</code></a></small>
      <div class="d-none name"><code>summaryFun.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Using all flag columns (column names starting with "."), this function either creates or updates
the .summary flag column which is FALSE when ANY of the flag columns are FALSE. Columns can be excluded
and removed after creating the .summary column. Additionally, the occurrence dataset
can be filtered to only those where .summary = TRUE at the end of the function.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">summaryFun</span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  dontFilterThese <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  onlyFilterThese <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  removeFilterColumns <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  filterClean <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>A data frame or tibble. Occurrence records to use as input.</p></dd>


<dt id="arg-dontfilterthese">dontFilterThese<a class="anchor" aria-label="anchor" href="#arg-dontfilterthese"></a></dt>
<dd><p>A character vector of flag columns to be ignored in the creation or updating
of the .summary column. Cannot be specified with onlyFilterThese.</p></dd>


<dt id="arg-onlyfilterthese">onlyFilterThese<a class="anchor" aria-label="anchor" href="#arg-onlyfilterthese"></a></dt>
<dd><p>A character vector. The inverse of dontFilterThese, where columns identified
here will be filtered and no others. Cannot be specified with dontFilterThese.</p></dd>


<dt id="arg-removefiltercolumns">removeFilterColumns<a class="anchor" aria-label="anchor" href="#arg-removefiltercolumns"></a></dt>
<dd><p>Logical. If TRUE all columns starting with "." will be removed in the
output data. This only makes sense to use when filterClean = TRUE. Default = FALSE.</p></dd>


<dt id="arg-filterclean">filterClean<a class="anchor" aria-label="anchor" href="#arg-filterclean"></a></dt>
<dd><p>Logical. If TRUE, the data will be filtered to only those occurrence where .summary
= TRUE (i.e., completely clean according to the used flag columns). Default = FALSE.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Returns a data frame or tibble of the input data but modified based on the above parameters.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Read in example data</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">beesFlagged</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># To only update the .summary column</span></span></span>
<span class="r-in"><span><span class="va">beesFlagged_out</span> <span class="op">&lt;-</span> <span class="fu">summaryFun</span><span class="op">(</span></span></span>
<span class="r-in"><span>    data <span class="op">=</span> <span class="va">beesFlagged</span>,</span></span>
<span class="r-in"><span>    dontFilterThese <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">".gridSummary"</span>, <span class="st">".lonFlag"</span>, <span class="st">".latFlag"</span>, <span class="st">".uncer_terms"</span>, <span class="st">".unLicensed"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    removeFilterColumns <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>    filterClean <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - We will NOT flag the following columns. However, they will remain in the data file.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> .gridSummary, .lonFlag, .latFlag, .uncer_terms, .unLicensed</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  - summaryFun:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Flagged 81 </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   The .summary column was added to the database.</span>
<span class="r-in"><span>  <span class="co"># View output</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">beesFlagged_out</span><span class="op">$</span><span class="va">.summary</span>, useNA <span class="op">=</span> <span class="st">"always"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> FALSE  TRUE  &lt;NA&gt; </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    81    19     0 </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Now filter to only the clean data and remove the flag columns</span></span></span>
<span class="r-in"><span><span class="va">beesFlagged_out</span> <span class="op">&lt;-</span> <span class="fu">summaryFun</span><span class="op">(</span></span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="fu">BeeBDC</span><span class="fu">::</span><span class="va"><a href="beesFlagged.html">beesFlagged</a></span>,</span></span>
<span class="r-in"><span>  dontFilterThese <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">".gridSummary"</span>, <span class="st">".lonFlag"</span>, <span class="st">".latFlag"</span>, <span class="st">".uncer_terms"</span>, <span class="st">".unLicensed"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  removeFilterColumns <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>  filterClean <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - We will NOT flag the following columns. However, they will remain in the data file.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> .gridSummary, .lonFlag, .latFlag, .uncer_terms, .unLicensed</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  - summaryFun:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Flagged 81 </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   The .summary column was added to the database.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  - REMOVED all occurrences that were FALSE for the 'summary' column.</span>
<span class="r-in"><span><span class="co"># View output</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">beesFlagged_out</span><span class="op">$</span><span class="va">.summary</span>, useNA <span class="op">=</span> <span class="st">"always"</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Unknown or uninitialised column: `.summary`.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;NA&gt; </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    0 </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by James B. Dorey, Robert L. O’Reilly, Silas Bossert, Erica E. Fischer.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

